{
    "info": {
        "_postman_id": "b7e5e34a-3c2b-4d1f-8a0a-9e1b2c3d4e5f",
        "name": "API Loja Completa",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
        "variable": [
            { "key": "BASE_URL", "value": "http://localhost:3000" },
            { "key": "USUARIO_ID", "value": "" },
            { "key": "VENDEDOR_ID", "value": "" },
            { "key": "FUNCIONARIO_ID", "value": "" },
            { "key": "ENDERECO_ID", "value": "" },
            { "key": "CATEGORIA_ID", "value": "" },
            { "key": "PRODUTO_ID", "value": "" },
            { "key": "ESTOQUE_ID", "value": "" },
            { "key": "PEDIDO_ID", "value": "" },
            { "key": "ITEM_PEDIDO_ID", "value": "" },
            { "key": "PAGAMENTO_ID", "value": "" }
        ]
    },
    "item": [
        {
            "name": "1. Usuarios",
            "item": [
                {
                    "name": "Criar Usuario",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"USUARIO_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"name\": \"Usuario de Teste\",\n  \"email\": \"usuario@teste.com\",\n  \"password\": \"senha123\",\n  \"cpf\": \"11122233344\"\n}"},
                        "url": "{{BASE_URL}}/usuarios"
                    }
                },
                {
                    "name": "Listar Usuarios",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/usuarios" }
                },
                {
                    "name": "Atualizar Usuario",
                    "request": {
                        "method": "PUT",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": { "mode": "raw", "raw": "{\n  \"name\": \"Usuario de Teste Alterado\"\n}"},
                        "url": "{{BASE_URL}}/usuarios/{{USUARIO_ID}}"
                    }
                },
                {
                    "name": "Deletar Usuario",
                    "request": { "method": "DELETE", "url": "{{BASE_URL}}/usuarios/{{USUARIO_ID}}" }
                }
            ]
        },
        {
            "name": "2. Vendedores",
            "item": [
                 {
                    "name": "Criar Vendedor",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"VENDEDOR_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"name\": \"Loja do Vendedor\",\n  \"email\": \"vendedor@loja.com\",\n  \"password\": \"senhaForte123\",\n  \"cnpj\": \"11222333000144\"\n}"},
                        "url": "{{BASE_URL}}/vendedores"
                    }
                },
                {
                    "name": "Listar Vendedores",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/vendedores" }
                }
            ]
        },
        {
            "name": "3. Funcionarios",
            "item": [
                 {
                    "name": "Criar Funcionario",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"FUNCIONARIO_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"name\": \"Funcionario Exemplo\",\n  \"email\": \"func@empresa.com\",\n  \"password\": \"senhaFunc\"\n}"},
                        "url": "{{BASE_URL}}/funcionarios"
                    }
                },
                {
                    "name": "Listar Funcionarios",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/funcionarios" }
                }
            ]
        },
        {
            "name": "4. Categorias",
            "item": [
                 {
                    "name": "Criar Categoria",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"CATEGORIA_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": { "mode": "raw", "raw": "{\n  \"name\": \"Eletronicos\"\n}"},
                        "url": "{{BASE_URL}}/categorias"
                    }
                },
                {
                    "name": "Listar Categorias",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/categorias" }
                }
            ]
        },
        {
            "name": "5. Produtos",
            "item": [
                {
                    "name": "Criar Produto",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"PRODUTO_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"name\": \"Smartphone XYZ\",\n  \"price\": 2500,\n  \"description\": \"Um otimo smartphone\",\n  \"category\": \"{{CATEGORIA_ID}}\"\n}"},
                        "url": "{{BASE_URL}}/produtos"
                    }
                },
                {
                    "name": "Listar Produtos",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/produtos" }
                }
            ]
        },
        {
            "name": "6. Enderecos",
            "item": [
                 {
                    "name": "Criar Endereco",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"ENDERECO_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"user\": \"{{USUARIO_ID}}\",\n  \"street\": \"Rua dos Bobos\",\n  \"number\": \"0\",\n  \"city\": \"Sao Paulo\",\n  \"state\": \"SP\",\n  \"zipCode\": \"01001000\"\n}"},
                        "url": "{{BASE_URL}}/enderecos"
                    }
                },
                {
                    "name": "Listar Enderecos",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/enderecos" }
                }
            ]
        },
        {
            "name": "7. Estoques",
            "item": [
                {
                    "name": "Adicionar ao Estoque",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"ESTOQUE_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"product\": \"{{PRODUTO_ID}}\",\n  \"quantity\": 100\n}"},
                        "url": "{{BASE_URL}}/estoques"
                    }
                },
                {
                    "name": "Listar Estoques",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/estoques" }
                }
            ]
        },
        {
            "name": "8. Pedidos",
            "item": [
                {
                    "name": "Criar Pedido",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"PEDIDO_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"user\": \"{{USUARIO_ID}}\",\n  \"funcionario\": \"{{FUNCIONARIO_ID}}\",\n  \"shippingAddress\": \"{{ENDERECO_ID}}\",\n  \"status\": \"Pendente\"\n}"},
                        "url": "{{BASE_URL}}/pedidos"
                    }
                },
                {
                    "name": "Listar Pedidos",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/pedidos" }
                }
            ]
        },
        {
            "name": "9. Itens do Pedido",
            "item": [
                {
                    "name": "Adicionar Item ao Pedido",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"ITEM_PEDIDO_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"pedido\": \"{{PEDIDO_ID}}\",\n  \"produto\": \"{{PRODUTO_ID}}\",\n  \"quantidade\": 2\n}"},
                        "url": "{{BASE_URL}}/itens-pedido"
                    }
                },
                {
                    "name": "Listar Itens do Pedido",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/itens-pedido" }
                }
            ]
        },
        {
            "name": "10. Pagamentos",
            "item": [
                {
                    "name": "Criar Pagamento",
                    "event": [{"listen": "test", "script": {"exec": ["pm.test(\"Status code is 201\");","const res = pm.response.json();","pm.collectionVariables.set(\"PAGAMENTO_ID\", res._id);"], "type": "text/javascript"}}],
                    "request": {
                        "method": "POST",
                        "header": [{ "key": "Content-Type", "value": "application/json" }],
                        "body": {"mode": "raw", "raw": "{\n  \"pedido\": \"{{PEDIDO_ID}}\",\n  \"valor\": 5000,\n  \"forma\": \"Cartao de Credito\"\n}"},
                        "url": "{{BASE_URL}}/pagamentos"
                    }
                },
                {
                    "name": "Listar Pagamentos",
                    "request": { "method": "GET", "url": "{{BASE_URL}}/pagamentos" }
                }
            ]
        }
    ]
}